<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | TLOU</title>

    <link rel="stylesheet" href="style/index.css">
    <link rel="stylesheet" href="style/dashboard.css">
    <link rel="icon" href="./assets/img/logo.webp">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="header">
        <div class="container">
            <div class="logo">
                <a href="index.html"><img src="./assets/img/logo.webp" alt="" height="50px"></a>
            </div>
            <ul class="navItens">
                <li>
                    <a href="#section_seuFinal">Seu Final</a>
                </li>
                <li>
                    <a href="#section_grafico">Gráficos</a>
                </li>
                <li>
                    <a href="minigame.html">Minigame ▸</a>
                </li>
            </ul>
            <div class="perfil">
                <div class="nomeUsuario">
                    <span>Olá, <span id="span_usuario">Usuário</span></span>
                </div>
                <div class="iconePerfil"><img src="./assets/img/iconePerfil.png"></div>
            </div>
        </div>
    </div>
    <div class="fraseEllie">
        <div class="container">
            <span>“Depois de tudo o que passamos juntos. De tudo o que eu fiz. Não pode ser em vão.”</span>
            <span>-Ellie</span>
        </div>
    </div>
    <section id="section_seuFinal">
        <div class="final">
            <div class="titulo">
                <h1>Escolha seu Final</h1>
            </div>
            <div class="tutorial">
                <span>E se você pudesse escolher seu final?</span>
                <span>E se, por acaso, estivesse em suas mãos a escolha de matar a Abby e se vingar pelo Joel...</span>
                <span>Ou poupar sua vida e quebrar o ciclo de vingança.</span>
                <span>Qual seria sua escolha?</span>
            </div>
            <div class="imagens">
                <section>
                    <img id="img1" src="./assets/img/ellieFinal.jpg" onclick="escolha01()">
                    <p class="ellieFinal">Salvar a Abby</p>

                    <img id="img2" src="./assets/img/abbyFinal.png" onclick="escolha02()">
                    <p class="abbyFinal">Matar a Abby</p>
                </section>
            </div>
        </div>
    </section>
    <section id="section_grafico">
        <div class="dash">
            <div class="interacao">
                <div class="graficoAlinhado">
                    <div class="grafico">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
                <div class="kpi">
                    <span id="span_mensagem">Total de Votos: 0</span>
                </div>
            </div>
            <div class="publico">
                <h1>Público</h1>
            </div>
            <div class="kpi">
                <span>Quantidade de acessos no site oficial da Playstation: 300</span>
            </div>
            <div class="kpi">
                <span>Quantidade de acessos no site oficial da HBO: 250</span>
            </div>
            <div class="graficoAlinhado">
                <div class="grafico">
                    <span>Gráfico Idade</span>
                </div>
            </div>
            <div class="graficoAlinhado">
                <div class="grafico">
                    <span>Gráfico Dispositivo</span>
                </div>
            </div>
        </div>
    </section>
    <div class="imgRodape"></div>
</body>

</html>

<script>
    // WEB-DATAVIZ
    if (sessionStorage.NOME_USUARIO != undefined) {
        span_usuario.innerText = sessionStorage.NOME_USUARIO;
    }

    const ctx = document.getElementById('myChart');


    var totalVotos = 0;
    var votoSalvar = 10;
    var votoMatar = 20;

    // VOTOS
    function escolha01() {
        console.log(votoSalvar)
        totalVotos++
        votoSalvar++

        span_mensagem.innerHTML = `Total de Votos: ${totalVotos}`;
    }

    function escolha02() {
        totalVotos++
        votoMatar++

        span_mensagem.innerHTML = `Total de Votos: ${totalVotos}`;
    }

    // GRÁFICO
    const data = {
        datasets: [{
            label: 'My First Dataset',
            backgroundColor: [
                'rgb(23, 74, 151)',
                'rgb(138, 40, 40)'
            ],
            hoverOffset: 4
        }]
    };
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Salvar', 'Matar'],
            datasets: [{
                label: '# of Votes',
                data: [votoSalvar, votoMatar],
                borderWidth: 0
            }]
        },
        options: {
            indexAxis: 'y',
        }
    }
    );
</script>